<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Professional CII Analytics</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body class="bg-slate-50 font-sans min-h-screen">

    <nav class="bg-slate-900 text-white p-6 shadow-md">
        <div class="max-w-5xl mx-auto flex justify-between items-center">
            <h1 class="text-xl font-bold tracking-tighter italic">MARITIME<span class="text-blue-400 text-2xl">CII</span></h1>
            <span class="bg-blue-500/20 text-blue-400 px-3 py-1 rounded-full text-xs font-mono">IMO 2026 Compliant</span>
        </div>
    </nav>

    <main class="max-w-6xl mx-auto p-6 grid lg:grid-cols-3 gap-8">
        
        <section class="lg:col-span-1 space-y-4">
            <div class="bg-white p-6 rounded-2xl shadow-sm border border-slate-200">
                <h2 class="text-sm font-black uppercase text-slate-400 mb-6 tracking-widest">Vessel Data</h2>
                
                <div class="space-y-4">
                    <div>
                        <label class="block text-xs font-bold text-slate-600 mb-1">Fuel Type</label>
                        <select id="fuelType" class="w-full p-3 border rounded-xl bg-slate-50 focus:ring-2 focus:ring-blue-500 transition outline-none">
                            <option value="3.206">MDO / MGO (3.206)</option>
                            <option value="3.114">HFO (3.114)</option>
                            <option value="2.750">LNG (2.750)</option>
                        </select>
                    </div>
                    <div>
                        <label class="block text-xs font-bold text-slate-600 mb-1">Capacity (DWT)</label>
                        <input type="number" id="capacity" value="50000" class="w-full p-3 border rounded-xl bg-slate-50">
                    </div>
                    <div>
                        <label class="block text-xs font-bold text-slate-600 mb-1">Fuel Consumption (mt)</label>
                        <input type="number" id="fuel" value="1200" class="w-full p-3 border rounded-xl bg-slate-50">
                    </div>
                    <div>
                        <label class="block text-xs font-bold text-slate-600 mb-1">Distance Sailed (nm)</label>
                        <input type="number" id="distance" value="25000" class="w-full p-3 border rounded-xl bg-slate-50">
                    </div>
                    <button onclick="calculate()" class="w-full bg-slate-900 text-white font-bold py-4 rounded-xl hover:bg-blue-600 transition-all transform active:scale-95 shadow-lg">
                        GENERATE DIAGRAM
                    </button>
                </div>
            </div>
        </section>

        <section class="lg:col-span-2 space-y-6">
            <div class="bg-white p-8 rounded-2xl shadow-sm border border-slate-200 min-h-[450px] flex flex-col items-center justify-center text-center">
                <h3 class="text-slate-800 font-bold text-lg mb-8">Performance Comparison</h3>
                
                <div class="relative w-full max-w-md h-64">
                    <canvas id="ciiChart"></canvas>
                </div>

                <div class="mt-8 grid grid-cols-2 gap-10 w-full border-t pt-8">
                    <div>
                        <p class="text-[10px] font-black uppercase text-slate-400">Current Rating</p>
                        <p id="ratingLabel" class="text-5xl font-black text-slate-300">--</p>
                    </div>
                    <div>
                        <p class="text-[10px] font-black uppercase text-slate-400">Attained CII</p>
                        <p id="ciiLabel" class="text-5xl font-mono font-bold text-slate-800">0.00</p>
                    </div>
                </div>
            </div>
        </section>
    </main>

    <script>
        let myChart;

        function calculate() {
            const cap = parseFloat(document.getElementById('capacity').value);
            const fuel = parseFloat(document.getElementById('fuel').value);
            const dist = parseFloat(document.getElementById('distance').value);
            const cf = parseFloat(document.getElementById('fuelType').value);

            // 1. Math: Attained CII
            const attained = (fuel * cf * 1000000) / (cap * dist);
            
            // 2. Math: Reference Line (Simplified Bulk Carrier example)
            const refLine = 4745 * Math.pow(cap, -0.622);
            
            // 3. Define Rating Thresholds
            const a_limit = refLine * 0.83;
            const b_limit = refLine * 0.94;
            const c_limit = refLine * 1.06;
            const d_limit = refLine * 1.28;

            updateUI(attained, a_limit, b_limit, c_limit, d_limit);
        }

        function updateUI(val, a, b, c, d) {
            document.getElementById('ciiLabel').innerText = val.toFixed(2);
            
            let rating = 'E';
            let color = '#ef4444'; // Red

            if (val <= a) { rating = 'A'; color = '#22c55e'; }
            else if (val <= b) { rating = 'B'; color = '#4ade80'; }
            else if (val <= c) { rating = 'C'; color = '#facc15'; }
            else if (val <= d) { rating = 'D'; color = '#fb923c'; }

            const label = document.getElementById('ratingLabel');
            label.innerText = rating;
            label.style.color = color;

            drawChart(val, a, b, c, d);
        }

        function drawChart(val, a, b, c, d) {
            const ctx = document.getElementById('ciiChart').getContext('2d');
            
            if (myChart) myChart.destroy();

            myChart = new Chart(ctx, {
                type: 'bar',
                data: {
                    labels: ['A', 'B', 'C', 'D', 'E', 'YOUR SHIP'],
                    datasets: [{
                        label: 'CO2 Intensity',
                        data: [a, b, c, d, d + 2, val],
                        backgroundColor: ['#22c55e', '#4ade80', '#facc15', '#fb923c', '#ef4444', '#2563eb'],
                        borderRadius: 10
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: { legend: { display: false } },
                    scales: {
                        y: { beginAtZero: true, grid: { display: false } }
                    }
                }
            });
        }

        // Initial run
        calculate();
    </script>
</body>
</html>
